
<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="referrer" content="origin" />
    <meta property="og:description" content="Given a collection of numbers that might contain duplicates, return all possible unique permutations" />
    <meta http-equiv="Cache-Control" content="no-transform" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>[LeetCode] 47. Permutations II 全排列之二 - Grandyang - 博客园</title>
    
    <link rel="stylesheet" href="/css/blog-common.min.css?v=PyyhYDRKBG1sYtpoHme_xHO5AMd5iN57I45iBKF8FVY" />
    <link id="MainCss" rel="stylesheet" href="/skins/unlimitedsunlight/bundle-unlimitedsunlight.min.css?v=0PW-IbyD73rSsrHXyZPdWAdlgI9zvcQ6P3MLE4OIhi4" />
    
    <link id="mobile-style" media="only screen and (max-width: 767px)" type="text/css" rel="stylesheet" href="/skins/unlimitedsunlight/bundle-unlimitedsunlight-mobile.min.css?v=1PFKcj_AbkIURdVbGrJ7RA7MSm_08tLLOsnXtqTHyME" />
    
    <link type="application/rss+xml" rel="alternate" href="https://www.cnblogs.com/grandyang/rss" />
    <link type="application/rsd+xml" rel="EditURI" href="https://www.cnblogs.com/grandyang/rsd.xml" />
    <link type="application/wlwmanifest+xml" rel="wlwmanifest" href="https://www.cnblogs.com/grandyang/wlwmanifest.xml" />
    <script src="https://common.cnblogs.com/scripts/jquery-2.2.0.min.js"></script>
    <script src="/js/blog-common.min.js?v=F-Iy-_Lj7VcUKRIvNkS6UZ5LItMqjh1_L0VZk9Yxfb8"></script>
    <script>
        var currentBlogId = 198221;
        var currentBlogApp = 'grandyang';
        var cb_enable_mathjax = true;
        var isLogined = false;
    </script>
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
        tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']], processClass: 'math', processEscapes: true },
        TeX: {
        equationNumbers: { autoNumber: ['AMS'], useLabelIds: true },
        extensions: ['extpfeil.js', 'mediawiki-texvc.js'],
        Macros: {bm: "\\boldsymbol"}
        },
        'HTML-CSS': { linebreaks: { automatic: true } },
        SVG: { linebreaks: { automatic: true } }
        });
    </script>
    <script src="https://mathjax.cnblogs.com/2_7_5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
</head>
<body>
    <a name="top"></a>
    <div id="page_begin_html">
        <a href="https://github.com/grandyang"> 
<img style="position: absolute; top: 0; left: 0; border: 0; z-index:9999;" 
src="https://github.blog/wp-content/uploads/2008/12/forkme_left_gray_6d6d6d.png" 
alt="Fork me on GitHub"> 
</a>

<script src="https://files.cnblogs.com/files/grandyang/tctip-1.0.4.js" defer></script>
<script>
new tctip({
top: '20%',
button: {
  id:7,
  type: 'zanzhu',
},
list: [
  {
        type: 'wechat',
	qrImg: 'https://files.cnblogs.com/files/grandyang/wepay.gif'
  }, {
	type: 'announcement',
        qrText: '2020，新的征途...'
  }
]
}).init()
</script>
    </div>
    
<!--done-->
<div id="home">
<div id="header">
	<div id="blogTitle">
        <a id="lnkBlogLogo" href="https://www.cnblogs.com/grandyang/"><img id="blogLogo" src="/skins/custom/images/logo.gif" alt="返回主页" /></a>		
		
<!--done-->
<h1><a id="Header1_HeaderTitle" class="headermaintitle HeaderMainTitle" href="https://www.cnblogs.com/grandyang/">Grandyang</a>
</h1>
<h2>
仰天长啸仗剑红尘，冬去春来寒暑几更...
</h2>




		
	</div><!--end: blogTitle 博客的标题和副标题 -->
	<div id="navigator">
		
<ul id="navList">
<li><a id="blog_nav_sitehome" class="menu" href="https://www.cnblogs.com/">
博客园</a>
</li>
<li>
<a id="blog_nav_myhome" class="menu" href="https://www.cnblogs.com/grandyang/">
首页</a>
</li>
<li>

<a id="blog_nav_newpost" class="menu" href="https://i.cnblogs.com/EditPosts.aspx?opt=1">
新随笔</a>
</li>
<li>
<a id="blog_nav_contact" class="menu" href="https://msg.cnblogs.com/send/Grandyang">
联系</a></li>
<li>
<a id="blog_nav_rss" class="menu" href="https://www.cnblogs.com/grandyang/rss/">
订阅</a>
<!--<partial name="./Shared/_XmlLink.cshtml" model="Model" /></li>--></li>
<li>
<a id="blog_nav_admin" class="menu" href="https://i.cnblogs.com/">
管理</a>
</li>
</ul>


		<div class="blogStats">
			
			<span id="stats_post_count">随笔 - 
1424&nbsp; </span>
<span id="stats_article_count">文章 - 
1&nbsp; </span>
<span id="stats-comment_count">评论 - 
4014</span>

			
		</div><!--end: blogStats -->
	</div><!--end: navigator 博客导航栏 -->
</div><!--end: header 头部 -->

<div id="main">
	<div id="mainContent">
	<div class="forFlow">
		<div id="post_detail">
    <!--done-->
    <div id="topics">
        <div class="post">
            <h1 class = "postTitle">
                
<a id="cb_post_title_url" class="postTitle2" href="https://www.cnblogs.com/grandyang/p/4359825.html">[LeetCode] 47. Permutations II 全排列之二</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                
<div id="cnblogs_post_body" class="blogpost-body ">
    <p>&nbsp;</p>
<p>Given a collection of numbers that might contain duplicates, return all possible unique permutations.</p>
<p>Example:</p>
<pre>Input: [1,1,2]
Output:
[
  [1,1,2],
  [1,2,1],
  [2,1,1]
]</pre>
<p>&nbsp;</p>
<p>这道题是之前那道&nbsp;<a id="homepage1_HomePageDays_DaysList_ctl00_DayList_TitleUrl_0" class="postTitle2" href="http://www.cnblogs.com/grandyang/p/4358848.html">Permutations</a>&nbsp;的延伸，由于输入数组有可能出现重复数字，如果按照之前的算法运算，会有重复排列产生，我们要避免重复的产生，在递归函数中要判断前面一个数和当前的数是否相等，如果相等，且其对应的 visited 中的值为1，当前的数字才能使用（下文中会解释这样做的原因），否则需要跳过，这样就不会产生重复排列了，代码如下：</p>
<p>&nbsp;</p>
<p>解法一：</p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff;">class</span><span style="color: #000000;"> Solution {
</span><span style="color: #0000ff;">public</span><span style="color: #000000;">:
    vector</span>&lt;vector&lt;<span style="color: #0000ff;">int</span>&gt;&gt; permuteUnique(vector&lt;<span style="color: #0000ff;">int</span>&gt;&amp;<span style="color: #000000;"> nums) {
        vector</span>&lt;vector&lt;<span style="color: #0000ff;">int</span>&gt;&gt;<span style="color: #000000;"> res;
        vector</span>&lt;<span style="color: #0000ff;">int</span>&gt; <span style="color: #0000ff;">out</span>, visited(nums.size(), <span style="color: #800080;">0</span><span style="color: #000000;">);
        sort(nums.begin(), nums.end());
        permuteUniqueDFS(nums, </span><span style="color: #800080;">0</span>, visited, <span style="color: #0000ff;">out</span><span style="color: #000000;">, res);
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> res;
    }
    </span><span style="color: #0000ff;">void</span> permuteUniqueDFS(vector&lt;<span style="color: #0000ff;">int</span>&gt;&amp; nums, <span style="color: #0000ff;">int</span> level, vector&lt;<span style="color: #0000ff;">int</span>&gt;&amp; visited, vector&lt;<span style="color: #0000ff;">int</span>&gt;&amp; <span style="color: #0000ff;">out</span>, vector&lt;vector&lt;<span style="color: #0000ff;">int</span>&gt;&gt;&amp;<span style="color: #000000;"> res) {
        </span><span style="color: #0000ff;">if</span> (level &gt;= nums.size()) {res.push_back(<span style="color: #0000ff;">out</span>); <span style="color: #0000ff;">return</span><span style="color: #000000;">;}
        </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = <span style="color: #800080;">0</span>; i &lt; nums.size(); ++<span style="color: #000000;">i) {
            </span><span style="color: #0000ff;">if</span> (visited[i] == <span style="color: #800080;">1</span>) <span style="color: #0000ff;">continue</span><span style="color: #000000;">;
            </span><span style="color: #0000ff;">if</span> (i &gt; <span style="color: #800080;">0</span> &amp;&amp; nums[i] == nums[i - <span style="color: #800080;">1</span>] &amp;&amp; visited[i - <span style="color: #800080;">1</span>] == <span style="color: #800080;">0</span>) <span style="color: #0000ff;">continue</span><span style="color: #000000;">;
            visited[i] </span>= <span style="color: #800080;">1</span><span style="color: #000000;">;
            </span><span style="color: #0000ff;">out</span><span style="color: #000000;">.push_back(nums[i]);
            permuteUniqueDFS(nums, level </span>+ <span style="color: #800080;">1</span>, visited, <span style="color: #0000ff;">out</span><span style="color: #000000;">, res);
            </span><span style="color: #0000ff;">out</span><span style="color: #000000;">.pop_back();
            visited[i] </span>= <span style="color: #800080;">0</span><span style="color: #000000;">;
        }
    }
};</span></pre>
</div>
<p>&nbsp;</p>
<p>在使用上面的方法的时候，一定要能弄清楚递归函数的 for 循环中两个 if 的剪枝的意思。在此之前，要弄清楚 level 的含义，这里用数组 out 来拼排列结果，level就是当前已经拼成的个数，其实就是 out 数组的长度。我们看到，for 循环的起始是从0开始的，而本题的解法二，三，四都是用了一个 start 变量，从而 for 循环都是从 start 开始，一定要分清楚 start 和本解法中的 level 的区别。由于递归的 for 都是从0开始，难免会重复遍历到数字，而全排列不能重复使用数字，意思是每个 nums 中的数字在全排列中只能使用一次（当然这并不妨碍 nums 中存在重复数字）。不能重复使用数字就靠 visited 数组来保证，这就是第一个 if 剪枝的意义所在。关键来看第二个 if 剪枝的意义，这里说当前数字和前一个数字相同，且前一个数字的 visited 值为0的时候，必须跳过。这里的前一个数 visited 值为0，并不代表前一个数字没有被处理过，也可能是递归结束后恢复状态时将 visited 值重置为0了，实际上就是这种情况，下面打印了一些中间过程的变量值，如下所示：</p>
<p>&nbsp;</p>
<div class="cnblogs_code">
<pre><span style="color: #000000;">level = 0, i = 0 =&gt; out: {}
level = 1, i = 0 =&gt; out: {1 } skipped 1
level = 1, i = 1 =&gt; out: {1 }
level = 2, i = 0 =&gt; out: {1 2 } skipped 1
level = 2, i = 1 =&gt; out: {1 2 } skipped 1
level = 2, i = 2 =&gt; out: {1 2 }
level = 3 =&gt; saved  {1 2 2}
level = 3, i = 0 =&gt; out: {1 2 2 } skipped 1
level = 3, i = 1 =&gt; out: {1 2 2 } skipped 1
level = 3, i = 2 =&gt; out: {1 2 2 } skipped 1
<span style="color: #ff0000;">level = 2, i = 2 =&gt; out: {1 2 2 } -&gt; {1 2 } recovered
level = 1, i = 1 =&gt; out: {1 2 } -&gt; {1 } recovered</span>
<span style="color: #0000ff;">level = 1, i = 2 =&gt; out: {1 } skipped 2</span>
level = 0, i = 0 =&gt; out: {1 } -&gt; {} recovered
level = 0, i = 1 =&gt; out: {}
level = 1, i = 0 =&gt; out: {2 }
level = 2, i = 0 =&gt; out: {2 1 } skipped 1
level = 2, i = 1 =&gt; out: {2 1 } skipped 1
level = 2, i = 2 =&gt; out: {2 1 }
level = 3 =&gt; saved  {1 2 2}
level = 3, i = 0 =&gt; out: {2 1 2 } skipped 1
level = 3, i = 1 =&gt; out: {2 1 2 } skipped 1
level = 3, i = 2 =&gt; out: {2 1 2 } skipped 1
<span style="color: #ff0000;">level = 2, i = 2 =&gt; out: {2 1 2 } -&gt; {2 1 } recovered
level = 1, i = 0 =&gt; out: {2 1 } -&gt; {2 } recovered</span>
level = 1, i = 1 =&gt; out: {2 } skipped 1
level = 1, i = 2 =&gt; out: {2 }
level = 2, i = 0 =&gt; out: {2 2 }
level = 3 =&gt; saved  {1 2 2}
level = 3, i = 0 =&gt; out: {2 2 1 } skipped 1
level = 3, i = 1 =&gt; out: {2 2 1 } skipped 1
level = 3, i = 2 =&gt; out: {2 2 1 } skipped 1
<span style="color: #ff0000;">level = 2, i = 0 =&gt; out: {2 2 1 } -&gt; {2 2 } recovered</span>
level = 2, i = 1 =&gt; out: {2 2 } skipped 1
level = 2, i = 2 =&gt; out: {2 2 } skipped 1
<span style="color: #ff0000;">level = 1, i = 2 =&gt; out: {2 2 } -&gt; {2 } recovered
level = 0, i = 1 =&gt; out: {2 } -&gt; {} recovered</span>
<span style="color: #0000ff;">level = 0, i = 2 =&gt; out: {} skipped 2</span></span></pre>
</div>
<p>&nbsp;</p>
<p>注意看这里面的 skipped 1 表示的是第一个 if 剪枝起作用的地方，skipped 2 表示的是第二个 if 剪枝起作用的地方。我们主要关心的是第二个 if 剪枝，看上方第一个蓝色标记的那行，再上面的红色一行表示在 level = 1, i = 1 时递归调用结束后，恢复到起始状态，那么此时 out 数组中只有一个1，后面的2已经被 pop_back() 了，当然对应的 visited 值也重置为0了，这种情况下需要剪枝，当然不能再一次把2往里加，因为这种情况在递归中已经加入到结果 res 中了，所以到了 level = 1, i = 2 的状态时，nums[i] == nums[i-1] &amp;&amp; visited[i-1] == 0 的条件满足了，剪枝就起作用了，这种重复的情况就被剪掉了。</p>
<p>还有一种比较简便的方法，在&nbsp;<a href="http://www.cnblogs.com/grandyang/p/4358848.html" target="_blank">Permutations</a>&nbsp;的基础上稍加修改，用 TreeSet 来保存结果，利用其不会有重复项的特点，然后在递归函数中 swap 的地方，判断如果i和 start 不相同，但是 nums[i] 和 nums[start] 相同的情况下跳过，继续下一个循环，参见代码如下：</p>
<p>&nbsp;</p>
<p>解法二：</p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff;">class</span><span style="color: #000000;"> Solution {
</span><span style="color: #0000ff;">public</span><span style="color: #000000;">:
    vector</span>&lt;vector&lt;<span style="color: #0000ff;">int</span>&gt;&gt; permuteUnique(vector&lt;<span style="color: #0000ff;">int</span>&gt;&amp;<span style="color: #000000;"> nums) {
        </span><span style="color: #0000ff;">set</span>&lt;vector&lt;<span style="color: #0000ff;">int</span>&gt;&gt;<span style="color: #000000;"> res;
        permute(nums, </span><span style="color: #800080;">0</span><span style="color: #000000;">, res);
        </span><span style="color: #0000ff;">return</span> vector&lt;vector&lt;<span style="color: #0000ff;">int</span>&gt;&gt;<span style="color: #000000;"> (res.begin(), res.end());
    }
    </span><span style="color: #0000ff;">void</span> permute(vector&lt;<span style="color: #0000ff;">int</span>&gt;&amp; nums, <span style="color: #0000ff;">int</span> start, <span style="color: #0000ff;">set</span>&lt;vector&lt;<span style="color: #0000ff;">int</span>&gt;&gt;&amp;<span style="color: #000000;"> res) {
        </span><span style="color: #0000ff;">if</span> (start &gt;=<span style="color: #000000;"> nums.size()) res.insert(nums);
        </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = start; i &lt; nums.size(); ++<span style="color: #000000;">i) {
            </span><span style="color: #0000ff;">if</span> (i != start &amp;&amp; nums[i] == nums[start]) <span style="color: #0000ff;">continue</span><span style="color: #000000;">;
            swap(nums[i], nums[start]);
            permute(nums, start </span>+ <span style="color: #800080;">1</span><span style="color: #000000;">, res);
            swap(nums[i], nums[start]);
        }
    }
};</span></pre>
</div>
<p>&nbsp;</p>
<p>对于上面的解法，你可能会有疑问，我们不是在 swap 操作之前已经做了剪枝了么，为什么还是会有重复出现，以至于还要用 TreeSet 来取出重复呢。总感觉使用 TreeSet 去重复有点耍赖，可能并没有探究到本题深层次的内容。这是很好的想法，首先尝试将上面的 TreeSet 还原为 vector，并且在主函数调用递归之前给 nums 排个序（代码参见评论区三楼），然后测试一个最简单的例子：[1, 2, 2]，得到的结果为：</p>
<p>[[1,2,2], <span style="color: #ff0000;">[2,1,2]</span>, <span style="color: #0000ff;">[2,2,1]</span>, <span style="color: #0000ff;">[2,2,1],&nbsp;</span> <span style="color: #ff0000;">[2,1,2]</span>]</p>
<p>我们发现有重复项，那么剪枝究竟在做些什么，怎么还是没法防止重复项的产生！那个剪枝只是为了防止当 start = 1, i = 2 时，将两个2交换，这样可以防止 {1, 2, 2} 被加入两次。但是没法防止其他的重复情况，要闹清楚为啥，需要仔细分析一些中间过程，下面打印了一些中间过程的变量：</p>
<p>&nbsp;</p>
<div class="cnblogs_code">
<pre>start = <span style="color: #800080;">0</span>, i = <span style="color: #800080;">0</span> =&gt; {<span style="color: #800080;">1</span> <span style="color: #800080;">2</span> <span style="color: #800080;">2</span><span style="color: #000000;">} 
start </span>= <span style="color: #800080;">1</span>, i = <span style="color: #800080;">1</span> =&gt; {<span style="color: #800080;">1</span> <span style="color: #800080;">2</span> <span style="color: #800080;">2</span><span style="color: #000000;">} 
start </span>= <span style="color: #800080;">2</span>, i = <span style="color: #800080;">2</span> =&gt; {<span style="color: #800080;">1</span> <span style="color: #800080;">2</span> <span style="color: #800080;">2</span><span style="color: #000000;">} 
start </span>= <span style="color: #800080;">3</span> =&gt; saved  {<span style="color: #800080;">1</span> <span style="color: #800080;">2</span> <span style="color: #800080;">2</span><span style="color: #000000;">}
start </span>= <span style="color: #800080;">1</span>, i = <span style="color: #800080;">2</span> =&gt; {<span style="color: #800080;">1</span> <span style="color: #800080;">2</span> <span style="color: #800080;">2</span><span style="color: #000000;">} skipped
start </span>= <span style="color: #800080;">0</span>, i = <span style="color: #800080;">1</span> =&gt; {<span style="color: #800080;">1</span> <span style="color: #800080;">2</span> <span style="color: #800080;">2</span>} -&gt; {<span style="color: #800080;">2</span> <span style="color: #800080;">1</span> <span style="color: #800080;">2</span><span style="color: #000000;">}
start </span>= <span style="color: #800080;">1</span>, i = <span style="color: #800080;">1</span> =&gt; {<span style="color: #800080;">2</span> <span style="color: #800080;">1</span> <span style="color: #800080;">2</span><span style="color: #000000;">} 
start </span>= <span style="color: #800080;">2</span>, i = <span style="color: #800080;">2</span> =&gt; {<span style="color: #800080;">2</span> <span style="color: #800080;">1</span> <span style="color: #800080;">2</span><span style="color: #000000;">} 
start </span>= <span style="color: #800080;">3</span> =&gt; saved  {<span style="color: #800080;">2</span> <span style="color: #800080;">1</span> <span style="color: #800080;">2</span><span style="color: #000000;">}
start </span>= <span style="color: #800080;">1</span>, i = <span style="color: #800080;">2</span> =&gt; {<span style="color: #800080;">2</span> <span style="color: #800080;">1</span> <span style="color: #800080;">2</span>} -&gt; {<span style="color: #800080;">2</span> <span style="color: #800080;">2</span> <span style="color: #800080;">1</span><span style="color: #000000;">}
start </span>= <span style="color: #800080;">2</span>, i = <span style="color: #800080;">2</span> =&gt; {<span style="color: #800080;">2</span> <span style="color: #800080;">2</span> <span style="color: #800080;">1</span><span style="color: #000000;">} 
start </span>= <span style="color: #800080;">3</span> =&gt; saved  {<span style="color: #800080;">2</span> <span style="color: #800080;">2</span> <span style="color: #800080;">1</span><span style="color: #000000;">}
<span style="color: #ff0000;">start </span></span><span style="color: #ff0000;">= 1, i = 2 =&gt; {2 2 1} -&gt; {2 1 2} recovered
start = 0, i = 1 =&gt; {2 1 2} -&gt; {1 2 2</span><span style="color: #000000;"><span style="color: #ff0000;">} recovered</span>
start </span>= <span style="color: #800080;">0</span>, i = <span style="color: #800080;">2</span> =&gt; {<span style="color: #800080;">1</span> <span style="color: #800080;">2</span> <span style="color: #800080;">2</span>} -&gt; {<span style="color: #800080;">2</span> <span style="color: #800080;">2</span> <span style="color: #800080;">1</span><span style="color: #000000;">}
start </span>= <span style="color: #800080;">1</span>, i = <span style="color: #800080;">1</span> =&gt; {<span style="color: #800080;">2</span> <span style="color: #800080;">2</span> <span style="color: #800080;">1</span><span style="color: #000000;">} 
start </span>= <span style="color: #800080;">2</span>, i = <span style="color: #800080;">2</span> =&gt; {<span style="color: #800080;">2</span> <span style="color: #800080;">2</span> <span style="color: #800080;">1</span><span style="color: #000000;">} 
start </span>= <span style="color: #800080;">3</span> =&gt; saved  {<span style="color: #800080;">2</span> <span style="color: #800080;">2</span> <span style="color: #800080;">1</span><span style="color: #000000;">}
start </span>= <span style="color: #800080;">1</span>, i = <span style="color: #800080;">2</span> =&gt; {<span style="color: #800080;">2</span> <span style="color: #800080;">2</span> <span style="color: #800080;">1</span>} -&gt; {<span style="color: #800080;">2</span> <span style="color: #800080;">1</span> <span style="color: #800080;">2</span><span style="color: #000000;">}
start </span>= <span style="color: #800080;">2</span>, i = <span style="color: #800080;">2</span> =&gt; {<span style="color: #800080;">2</span> <span style="color: #800080;">1</span> <span style="color: #800080;">2</span><span style="color: #000000;">} 
start </span>= <span style="color: #800080;">3</span> =&gt; saved  {<span style="color: #800080;">2</span> <span style="color: #800080;">1</span> <span style="color: #800080;">2</span><span style="color: #000000;">}
start </span>= <span style="color: #800080;">1</span>, i = <span style="color: #800080;">2</span> =&gt; {<span style="color: #800080;">2</span> <span style="color: #800080;">1</span> <span style="color: #800080;">2</span>} -&gt; {<span style="color: #800080;">2</span> <span style="color: #800080;">2</span> <span style="color: #800080;">1</span><span style="color: #000000;">} recovered
start </span>= <span style="color: #800080;">0</span>, i = <span style="color: #800080;">2</span> =&gt; {<span style="color: #800080;">2</span> <span style="color: #800080;">2</span> <span style="color: #800080;">1</span>} -&gt; {<span style="color: #800080;">1</span> <span style="color: #800080;">2</span> <span style="color: #800080;">2</span>} recovered</pre>
</div>
<p>&nbsp;</p>
<p>问题出在了递归调用之后的还原状态，参见上面的红色的两行，当 start = 0, i = 2 时，nums 已经还原到了 {1, 2, 2} 的状态，此时 nums[start] 不等于 nums[i]，剪枝在这已经失效了，那么交换后的 {2, 2, 1} 还会被存到结果 res 中，而这个状态在之前就已经存过了一次。</p>
<p>注意到当 start = 0, i = 1 时，nums 交换之后变成了 {2, 1, 2}，如果能保持这个状态，那么当 start = 0, i = 2 时，此时 nums[start] 就等于 nums[i] 了，剪枝操作就可以发挥作用了。怎么才能当递归结束后，不还原成为交换之前的状态的呢？答案就是不进行还原，这样还是能保存为之前交换后的状态。只是将最后一句&nbsp;swap(nums[i], nums[start]) 删掉是不行的，因为递归函数的参数 nums 是加了&amp;号，就表示引用了，那么之前调用递归函数之前的 nums 在递归函数中会被修改，可能还是无法得到我们想要的顺序，所以要把递归函数的 nums 参数的&amp;号也同时去掉才行，参见代码如下：</p>
<p>&nbsp;</p>
<p>解法三：</p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff;">class</span><span style="color: #000000;"> Solution {
</span><span style="color: #0000ff;">public</span><span style="color: #000000;">:
    vector</span>&lt;vector&lt;<span style="color: #0000ff;">int</span>&gt;&gt; permuteUnique(vector&lt;<span style="color: #0000ff;">int</span>&gt;&amp;<span style="color: #000000;"> nums) {
        vector</span>&lt;vector&lt;<span style="color: #0000ff;">int</span>&gt;&gt;<span style="color: #000000;"> res;
        sort(nums.begin(), nums.end());
        permute(nums, </span><span style="color: #800080;">0</span><span style="color: #000000;">, res);
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> res;
    }
    </span><span style="color: #0000ff;">void</span> permute(vector&lt;<span style="color: #0000ff;">int</span>&gt; nums, <span style="color: #0000ff;">int</span> start, vector&lt;vector&lt;<span style="color: #0000ff;">int</span>&gt;&gt;&amp;<span style="color: #000000;"> res) {
        </span><span style="color: #0000ff;">if</span> (start &gt;=<span style="color: #000000;"> nums.size()) res.push_back(nums);
        </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = start; i &lt; nums.size(); ++<span style="color: #000000;">i) {
            </span><span style="color: #0000ff;">if</span> (i != start &amp;&amp; nums[i] == nums[start]) <span style="color: #0000ff;">continue</span><span style="color: #000000;">;
            swap(nums[i], nums[start]);
            permute(nums, start </span>+ <span style="color: #800080;">1</span><span style="color: #000000;">, res);
        }
    }
};</span></pre>
</div>
<p>&nbsp;</p>
<p>好，再测试下 [1, 2, 2] 这个例子，并且把中间变量打印出来：</p>
<p>&nbsp;</p>
<div class="cnblogs_code">
<pre>start = <span style="color: #800080;">0</span>, i = <span style="color: #800080;">0</span> =&gt; {<span style="color: #800080;">1</span> <span style="color: #800080;">2</span> <span style="color: #800080;">2</span><span style="color: #000000;">} 
start </span>= <span style="color: #800080;">1</span>, i = <span style="color: #800080;">1</span> =&gt; {<span style="color: #800080;">1</span> <span style="color: #800080;">2</span> <span style="color: #800080;">2</span><span style="color: #000000;">} 
start </span>= <span style="color: #800080;">2</span>, i = <span style="color: #800080;">2</span> =&gt; {<span style="color: #800080;">1</span> <span style="color: #800080;">2</span> <span style="color: #800080;">2</span><span style="color: #000000;">} 
start </span>= <span style="color: #800080;">3</span> =&gt; saved  {<span style="color: #800080;">1</span> <span style="color: #800080;">2</span> <span style="color: #800080;">2</span><span style="color: #000000;">}
start </span>= <span style="color: #800080;">1</span>, i = <span style="color: #800080;">2</span> =&gt; {<span style="color: #800080;">1</span> <span style="color: #800080;">2</span> <span style="color: #800080;">2</span><span style="color: #000000;">} skipped
start </span>= <span style="color: #800080;">0</span>, i = <span style="color: #800080;">1</span> =&gt; {<span style="color: #800080;">1</span> <span style="color: #800080;">2</span> <span style="color: #800080;">2</span>} -&gt; {<span style="color: #800080;">2</span> <span style="color: #800080;">1</span> <span style="color: #800080;">2</span><span style="color: #000000;">}
start </span>= <span style="color: #800080;">1</span>, i = <span style="color: #800080;">1</span> =&gt; {<span style="color: #800080;">2</span> <span style="color: #800080;">1</span> <span style="color: #800080;">2</span><span style="color: #000000;">} 
start </span>= <span style="color: #800080;">2</span>, i = <span style="color: #800080;">2</span> =&gt; {<span style="color: #800080;">2</span> <span style="color: #800080;">1</span> <span style="color: #800080;">2</span><span style="color: #000000;">} 
start </span>= <span style="color: #800080;">3</span> =&gt; saved  {<span style="color: #800080;">2</span> <span style="color: #800080;">1</span> <span style="color: #800080;">2</span><span style="color: #000000;">}
start </span>= <span style="color: #800080;">1</span>, i = <span style="color: #800080;">2</span> =&gt; {<span style="color: #800080;">2</span> <span style="color: #800080;">1</span> <span style="color: #800080;">2</span>} -&gt; {<span style="color: #800080;">2</span> <span style="color: #800080;">2</span> <span style="color: #800080;">1</span><span style="color: #000000;">}
start </span>= <span style="color: #800080;">2</span>, i = <span style="color: #800080;">2</span> =&gt; {<span style="color: #800080;">2</span> <span style="color: #800080;">2</span> <span style="color: #800080;">1</span><span style="color: #000000;">} 
start </span>= <span style="color: #800080;">3</span> =&gt; saved  {<span style="color: #800080;">2</span> <span style="color: #800080;">2</span> <span style="color: #800080;">1</span><span style="color: #000000;">}
<span style="color: #ff0000;">start </span></span><span style="color: #ff0000;">= 1, i = 2 =&gt; {2 2 1} recovered
start = 0, i = 1 =&gt; {2 1 2</span><span style="color: #000000;"><span style="color: #ff0000;">} recovered</span>
start </span>= <span style="color: #800080;">0</span>, i = <span style="color: #800080;">2</span> =&gt; {<span style="color: #800080;">2</span> <span style="color: #800080;">1</span> <span style="color: #800080;">2</span>} skipped</pre>
</div>
<p>&nbsp;</p>
<p>明显发现短了许多，说明剪枝发挥了作用，看上面红色部分，当 start = 0, i = 1 时，递归函数调用完了之后，nums 数组保持了 {2, 1, 2} 的状态，那么到 start = 0, i = 2 的时候，nums[start] 就等于 nums[i] 了，剪枝操作就可以发挥作用了。</p>
<p>这时候你可能会想，调用完递归不恢复状态，感觉怪怪的，跟哥的递归模版不一样啊，容易搞混啊，而且一会加&amp;号，一会不加的，这尼玛谁能分得清啊。别担心，I gotcha covered! 好，既然还是要恢复状态的话，就只能从剪枝入手了，原来那种 naive 的剪枝方法肯定无法使用，矛盾的焦点还是在于，当 start = 0, i = 2 时，nums 被还原成了 start = 0, i = 1 的交换前的状态 {1, 2, 2}，这个状态已经被处理过了，再去处理一定会产生重复，怎么才知道这被处理过了呢，当前的 i = 2，需要往前去找是否有重复出现，由于数组已经排序过了，如果有重复，那么前面数一定和当前的相同，所以用一个 while 循环，往前找和 nums[i] 相同的数字，找到了就停下，当然如果小于 start 了也要停下，那么如果没有重复数字的话，j 一定是等于 start-1 的，那么如果不等于的话，就直接跳过就可以了，这样就可以去掉所有的重复啦，参见代码如下：</p>
<p>&nbsp;</p>
<p>解法四：</p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff;">class</span><span style="color: #000000;"> Solution {
</span><span style="color: #0000ff;">public</span><span style="color: #000000;">:
    vector</span>&lt;vector&lt;<span style="color: #0000ff;">int</span>&gt;&gt; permuteUnique(vector&lt;<span style="color: #0000ff;">int</span>&gt;&amp;<span style="color: #000000;"> nums) {
        vector</span>&lt;vector&lt;<span style="color: #0000ff;">int</span>&gt;&gt;<span style="color: #000000;"> res;
        sort(nums.begin(), nums.end());
        permute(nums, </span><span style="color: #800080;">0</span><span style="color: #000000;">, res);
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> res;
    }
    </span><span style="color: #0000ff;">void</span> permute(vector&lt;<span style="color: #0000ff;">int</span>&gt;&amp; nums, <span style="color: #0000ff;">int</span> start, vector&lt;vector&lt;<span style="color: #0000ff;">int</span>&gt;&gt;&amp;<span style="color: #000000;"> res) {
        </span><span style="color: #0000ff;">if</span> (start &gt;=<span style="color: #000000;"> nums.size()) res.push_back(nums);
        </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = start; i &lt; nums.size(); ++<span style="color: #000000;">i) {
            </span><span style="color: #0000ff;">int</span> j = i - <span style="color: #800080;">1</span><span style="color: #000000;">;
            </span><span style="color: #0000ff;">while</span> (j &gt;= start &amp;&amp; nums[j] != nums[i]) --<span style="color: #000000;">j;
            </span><span style="color: #0000ff;">if</span> (j != start - <span style="color: #800080;">1</span>) <span style="color: #0000ff;">continue</span><span style="color: #000000;">;
            swap(nums[i], nums[start]);
            permute(nums, start </span>+ <span style="color: #800080;">1</span><span style="color: #000000;">, res);
            swap(nums[i], nums[start]);
        }
    }
};</span></pre>
</div>
<p>&nbsp;</p>
<p>同样，我们再测试下 [1, 2, 2] 这个例子，并且把中间变量打印出来：</p>
<p>&nbsp;</p>
<div class="cnblogs_code">
<pre>start = <span style="color: #800080;">0</span>, i = <span style="color: #800080;">0</span> =&gt; {<span style="color: #800080;">1</span> <span style="color: #800080;">2</span> <span style="color: #800080;">2</span>} , j = -<span style="color: #800080;">1</span><span style="color: #000000;">
start </span>= <span style="color: #800080;">1</span>, i = <span style="color: #800080;">1</span> =&gt; {<span style="color: #800080;">1</span> <span style="color: #800080;">2</span> <span style="color: #800080;">2</span>} , j = <span style="color: #800080;">0</span><span style="color: #000000;">
start </span>= <span style="color: #800080;">2</span>, i = <span style="color: #800080;">2</span> =&gt; {<span style="color: #800080;">1</span> <span style="color: #800080;">2</span> <span style="color: #800080;">2</span>} , j = <span style="color: #800080;">1</span><span style="color: #000000;">
start </span>= <span style="color: #800080;">3</span> =&gt; saved  {<span style="color: #800080;">1</span> <span style="color: #800080;">2</span> <span style="color: #800080;">2</span><span style="color: #000000;">}
start </span>= <span style="color: #800080;">1</span>, i = <span style="color: #800080;">2</span> =&gt; {<span style="color: #800080;">1</span> <span style="color: #800080;">2</span> <span style="color: #800080;">2</span>} skipped, j = <span style="color: #800080;">1</span><span style="color: #000000;">
start </span>= <span style="color: #800080;">0</span>, i = <span style="color: #800080;">1</span> =&gt; {<span style="color: #800080;">1</span> <span style="color: #800080;">2</span> <span style="color: #800080;">2</span>} -&gt; {<span style="color: #800080;">2</span> <span style="color: #800080;">1</span> <span style="color: #800080;">2</span>}, j = -<span style="color: #800080;">1</span><span style="color: #000000;">
start </span>= <span style="color: #800080;">1</span>, i = <span style="color: #800080;">1</span> =&gt; {<span style="color: #800080;">2</span> <span style="color: #800080;">1</span> <span style="color: #800080;">2</span>} , j = <span style="color: #800080;">0</span><span style="color: #000000;">
start </span>= <span style="color: #800080;">2</span>, i = <span style="color: #800080;">2</span> =&gt; {<span style="color: #800080;">2</span> <span style="color: #800080;">1</span> <span style="color: #800080;">2</span>} , j = <span style="color: #800080;">1</span><span style="color: #000000;">
start </span>= <span style="color: #800080;">3</span> =&gt; saved  {<span style="color: #800080;">2</span> <span style="color: #800080;">1</span> <span style="color: #800080;">2</span><span style="color: #000000;">}
start </span>= <span style="color: #800080;">1</span>, i = <span style="color: #800080;">2</span> =&gt; {<span style="color: #800080;">2</span> <span style="color: #800080;">1</span> <span style="color: #800080;">2</span>} -&gt; {<span style="color: #800080;">2</span> <span style="color: #800080;">2</span> <span style="color: #800080;">1</span>}, j = <span style="color: #800080;">0</span><span style="color: #000000;">
start </span>= <span style="color: #800080;">2</span>, i = <span style="color: #800080;">2</span> =&gt; {<span style="color: #800080;">2</span> <span style="color: #800080;">2</span> <span style="color: #800080;">1</span>} , j = <span style="color: #800080;">1</span><span style="color: #000000;">
start </span>= <span style="color: #800080;">3</span> =&gt; saved  {<span style="color: #800080;">2</span> <span style="color: #800080;">2</span> <span style="color: #800080;">1</span><span style="color: #000000;">}
<span style="color: #ff0000;">start </span></span><span style="color: #ff0000;">= 1, i = 2 =&gt; {2 2 1} -&gt; {2 1 2} recovered
start = 0, i = 1 =&gt; {2 1 2} -&gt; {1 2 2</span><span style="color: #000000;"><span style="color: #ff0000;">} recovered</span>
start </span>= <span style="color: #800080;">0</span>, i = <span style="color: #800080;">2</span> =&gt; {<span style="color: #800080;">1</span> <span style="color: #800080;">2</span> <span style="color: #800080;">2</span>} skipped, j = <span style="color: #800080;">1</span></pre>
</div>
<p>&nbsp;</p>
<p>到 start = 0, i = 2 的时候，j 此时等于1了，明显不是 start-1，说明有重复了，直接 skip 掉，这样剪枝操作就可以发挥作用了。</p>
<p>之前的&nbsp;<a href="http://www.cnblogs.com/grandyang/p/4358848.html" target="_blank">Permutations</a>&nbsp;中的解法三也可以用在这里，只不过需要借助 TreeSet 来去重复，博主还未想出其他不用集合的去重复的方法，哪位看官大神们知道的话，请一定要留言告知博主，参见代码如下：</p>
<p>&nbsp;</p>
<p>解法五：</p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff;">class</span><span style="color: #000000;"> Solution {
</span><span style="color: #0000ff;">public</span><span style="color: #000000;">:
    vector</span>&lt;vector&lt;<span style="color: #0000ff;">int</span>&gt;&gt; permuteUnique(vector&lt;<span style="color: #0000ff;">int</span>&gt;&amp;<span style="color: #000000;"> nums) {
        </span><span style="color: #0000ff;">if</span> (nums.empty()) <span style="color: #0000ff;">return</span> vector&lt;vector&lt;<span style="color: #0000ff;">int</span>&gt;&gt;(<span style="color: #800080;">1</span>, vector&lt;<span style="color: #0000ff;">int</span>&gt;<span style="color: #000000;">());
        </span><span style="color: #0000ff;">set</span>&lt;vector&lt;<span style="color: #0000ff;">int</span>&gt;&gt;<span style="color: #000000;"> res;
        </span><span style="color: #0000ff;">int</span> first = nums[<span style="color: #800080;">0</span><span style="color: #000000;">];
        nums.erase(nums.begin());
        vector</span>&lt;vector&lt;<span style="color: #0000ff;">int</span>&gt;&gt; words =<span style="color: #000000;"> permuteUnique(nums);
        </span><span style="color: #0000ff;">for</span> (auto &amp;<span style="color: #000000;">a : words) {
            </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = <span style="color: #800080;">0</span>; i &lt;= a.size(); ++<span style="color: #000000;">i) {
                a.insert(a.begin() </span>+<span style="color: #000000;"> i, first);
                res.insert(a);
                a.erase(a.begin() </span>+<span style="color: #000000;"> i);
            }
        }   
        </span><span style="color: #0000ff;">return</span> vector&lt;vector&lt;<span style="color: #0000ff;">int</span>&gt;&gt;<span style="color: #000000;"> (res.begin(), res.end());
    }
};</span></pre>
</div>
<p>&nbsp;</p>
<p>之前的&nbsp;<a href="http://www.cnblogs.com/grandyang/p/4358848.html" target="_blank">Permutations</a>&nbsp;中的解法四博主没法成功修改使其可以通过这道题，即便是将结果 res 用 TreeSet 来去重复，还是不对。同样，哪位看官大神们知道的话，请一定要留言告知博主。后经过微信公众号上的热心网友 hahaboy 的提醒下，可以通过加上一个剪枝从而通过这道题，在最中间的 for 循环的最后，判断若 num 等于 t[i]，直接 break 掉当前循环，否则会产生重复项，参见代码如下：</p>
<p>&nbsp;</p>
<p>解法六：</p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff;">class</span><span style="color: #000000;"> Solution {
</span><span style="color: #0000ff;">public</span><span style="color: #000000;">:
    vector</span>&lt;vector&lt;<span style="color: #0000ff;">int</span>&gt;&gt; permuteUnique(vector&lt;<span style="color: #0000ff;">int</span>&gt;&amp;<span style="color: #000000;"> nums) {
        vector</span>&lt;vector&lt;<span style="color: #0000ff;">int</span>&gt;&gt;<span style="color: #000000;"> res{{}};
        </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span><span style="color: #000000;"> num : nums) {
            </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> k = res.size(); k &gt; <span style="color: #800080;">0</span>; --<span style="color: #000000;">k) {
                vector</span>&lt;<span style="color: #0000ff;">int</span>&gt; t =<span style="color: #000000;"> res.front();
                res.erase(res.begin());
                </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = <span style="color: #800080;">0</span>; i &lt;= t.size(); ++<span style="color: #000000;">i) {
                    vector</span>&lt;<span style="color: #0000ff;">int</span>&gt; one =<span style="color: #000000;"> t;
                    one.insert(one.begin() </span>+<span style="color: #000000;"> i, num);
                    res.push_back(one);
                    </span><span style="color: #0000ff;">if</span> (i &lt; t.size() &amp;&amp; num == t[i]) <span style="color: #0000ff;">break</span><span style="color: #000000;">;
                }
            }
        }
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> res;
    }
};</span></pre>
</div>
<p>&nbsp;</p>
<p>之前的&nbsp;<a href="http://www.cnblogs.com/grandyang/p/4358848.html" target="_blank">Permutations</a>&nbsp;中的解法五却可以原封不动的搬到这道题来，看来自带的 next_permutation() 函数就是叼啊，自带去重复功能，叼叼叼！参见代码如下：</p>
<p>&nbsp;</p>
<p>解法七：</p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff;">class</span><span style="color: #000000;"> Solution {
</span><span style="color: #0000ff;">public</span><span style="color: #000000;">:
    vector</span>&lt;vector&lt;<span style="color: #0000ff;">int</span>&gt;&gt; permuteUnique(vector&lt;<span style="color: #0000ff;">int</span>&gt;&amp;<span style="color: #000000;"> nums) {
        vector</span>&lt;vector&lt;<span style="color: #0000ff;">int</span>&gt;&gt;<span style="color: #000000;"> res;
        sort(nums.begin(), nums.end());
        res.push_back(nums);
        </span><span style="color: #0000ff;">while</span><span style="color: #000000;"> (next_permutation(nums.begin(), nums.end())) {
            res.push_back(nums);
        }
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> res;
    }
};</span></pre>
</div>
<p>&nbsp;</p>
<p>Github 同步地址：</p>
<p><a href="https://github.com/grandyang/leetcode/issues/47">https://github.com/grandyang/leetcode/issues/47</a></p>
<p>&nbsp;</p>
<p>类似题目：</p>
<p><a href="http://www.cnblogs.com/grandyang/p/4358848.html" target="_blank">Permutations</a></p>
<p><a href="http://www.cnblogs.com/grandyang/p/4428207.html" target="_blank">Next Permutation</a></p>
<p><a href="http://www.cnblogs.com/grandyang/p/5315227.html" target="_blank">Palindrome Permutation II</a>&nbsp;</p>
<p>&nbsp;</p>
<p>参考资料：</p>
<p><a href="https://leetcode.com/problems/permutations-ii/" target="_blank">https://leetcode.com/problems/permutations-ii/</a></p>
<p><a href="https://leetcode.com/problems/permutations-ii/discuss/18601/Short-iterative-Java-solution" target="_blank">https://leetcode.com/problems/permutations-ii/discuss/18601/Short-iterative-Java-solution</a></p>
<p><a href="https://leetcode.com/problems/permutations-ii/discuss/18596/A-simple-C%2B%2B-solution-in-only-20-lines" target="_blank">https://leetcode.com/problems/permutations-ii/discuss/18596/A-simple-C%2B%2B-solution-in-only-20-lines</a></p>
<p><a href="https://leetcode.com/problems/permutations-ii/discuss/18594/Really-easy-Java-solution-much-easier-than-the-solutions-with-very-high-vote" target="_blank">https://leetcode.com/problems/permutations-ii/discuss/18594/Really-easy-Java-solution-much-easier-than-the-solutions-with-very-high-vote</a></p>
<p>&nbsp;</p>
<p><a id="cb_post_title_url" class="postTitle2" href="http://www.cnblogs.com/grandyang/p/4606334.html">LeetCode All in One 题目讲解汇总(持续更新中...)</a></p>
</div>
<div id="MySignature"></div>
<div class="clear"></div>
<div id="blog_post_info_block">
    <div id="blog_post_info"></div>
    <div class="clear"></div>
    <div id="post_next_prev"></div>
</div>
            </div>
            <div class="postDesc">posted @ 
<span id="post-date">2015-03-23 14:57</span>&nbsp;
<a href="https://www.cnblogs.com/grandyang/">Grandyang</a>&nbsp;
阅读(<span id="post_view_count">...</span>)&nbsp;
评论(<span id="post_comment_count">...</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=4359825" rel="nofollow">编辑</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(4359825);return false;">收藏</a></div>
        </div>
	    
	    
    </div><!--end: topics 文章、评论容器-->
</div>
<script src="https://common.cnblogs.com/highlight/9.12.0/highlight.min.js"></script>
<script>markdown_highlight();</script>
<script>
    var allowComments = true, cb_blogId = 198221, cb_blogApp = 'grandyang', cb_blogUserGuid = '02affae8-0e77-e111-aa3f-842b2b196315';
    var cb_entryId = 4359825, cb_entryCreatedDate = '2015-03-23 14:57', cb_postType = 1; 
    loadViewCount(cb_entryId);
</script><a name="!comments"></a>
<div id="blog-comments-placeholder"></div>
<script>
    var commentManager = new blogCommentManager();
    commentManager.renderComments(0);
</script>

<div id="comment_form" class="commentform">
    <a name="commentform"></a>
    <div id="divCommentShow"></div>
    <div id="comment_nav"><span id="span_refresh_tips"></span><a href="javascript:void(0);" onclick="return RefreshCommentList();" id="lnk_RefreshComments" runat="server" clientidmode="Static">刷新评论</a><a href="#" onclick="return RefreshPage();">刷新页面</a><a href="#top">返回顶部</a></div>
    <div id="comment_form_container"></div>
    <div class="ad_text_commentbox" id="ad_text_under_commentbox"></div>
    <div id="ad_t2"></div>
    <div id="opt_under_post"></div>
    <script async="async" src="https://www.googletagservices.com/tag/js/gpt.js"></script>
    <script>
        var googletag = googletag || {};
        googletag.cmd = googletag.cmd || [];
    </script>
    <script>
        googletag.cmd.push(function () {
            googletag.defineSlot("/1090369/C1", [300, 250], "div-gpt-ad-1546353474406-0").addService(googletag.pubads());
            googletag.defineSlot("/1090369/C2", [468, 60], "div-gpt-ad-1539008685004-0").addService(googletag.pubads());
            googletag.pubads().enableSingleRequest();
            googletag.enableServices();
        });
    </script>
    <div id="cnblogs_c1" class="c_ad_block">
        <div id="div-gpt-ad-1546353474406-0" style="height:250px; width:300px;"></div>
    </div>
    <div id="under_post_news"></div>
    <div id="cnblogs_c2" class="c_ad_block">
        <div id="div-gpt-ad-1539008685004-0" style="height:60px; width:468px;">
            <script>
                if (new Date() >= new Date(2018, 9, 13)) {
                    googletag.cmd.push(function () { googletag.display("div-gpt-ad-1539008685004-0"); });
                }
            </script>
        </div>
    </div>
    <div id="under_post_kb"></div>
    <div id="HistoryToday" class="c_ad_block"></div>
    <script type="text/javascript">
        fixPostBody();
        setTimeout(function () { incrementViewCount(cb_entryId); }, 50);
        deliverAdT2();
        deliverAdC1();
        deliverAdC2();
        loadNewsAndKb();
        loadBlogSignature();
LoadPostCategoriesTags(cb_blogId, cb_entryId);        LoadPostInfoBlock(cb_blogId, cb_entryId, cb_blogApp, cb_blogUserGuid);
        GetPrevNextPost(cb_entryId, cb_blogId, cb_entryCreatedDate, cb_postType);
        loadOptUnderPost();
        GetHistoryToday(cb_blogId, cb_blogApp, cb_entryCreatedDate);
    </script>
</div>
	</div><!--end: forFlow -->
	</div><!--end: mainContent 主体内容容器-->

	<div id="sideBar">
		<div id="sideBarMain">
			
<div id="sidebar_news" class="newsItem">
            <script>loadBlogNews();</script>
</div>

			<div id="blog-calendar" style="display:none"></div><script>loadBlogDefaultCalendar();</script>
			
			<div id="leftcontentcontainer">
				<div id="blog-sidecolumn"></div>
                    <script>loadBlogSideColumn();</script>
			</div>
			
		</div><!--end: sideBarMain -->
	</div><!--end: sideBar 侧边栏容器 -->
	<div class="clear"></div>
	</div><!--end: main -->
	<div class="clear"></div>
	<div id="footer">
		<!--done-->
Copyright &copy; 2020 Grandyang
<br /><span id="poweredby">Powered by .NET Core 3.1.0 on Linux</span>



	</div><!--end: footer -->
</div><!--end: home 自定义的最大容器 -->


    <div id="page_end_html">
        <a href="https://github.com/grandyang"> 
<img style="position: absolute; top: 0; left: 0; border: 0; z-index:9999;" 
src="https://github.blog/wp-content/uploads/2008/12/forkme_left_gray_6d6d6d.png" 
alt="Fork me on GitHub"> 
</a>

<script src="https://files.cnblogs.com/files/grandyang/tctip-1.0.4.js" defer></script>
<script>
new tctip({
top: '20%',
button: {
  id:7,
  type: 'zanzhu',
},
list: [
  {
        type: 'wechat',
	qrImg: 'https://files.cnblogs.com/files/grandyang/wepay.gif'
  }, {
	type: 'announcement',
        qrText: '2020，新的征途...'
  }
]
}).init()
</script>
    </div>
</body>
</html>